<?xml version="1.0" encoding="utf-8"?> <!DOCTYPE article PUBLIC
"-//OASIS//DTD DocBook XML V4.3//EN"
"http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd"
[]>
<?xml-stylesheet type="text/css" href="css/affplan.css"?>

<article lang="en">
  <articleinfo>
    <title>
      Inherit platform development
    </title>

    <titleabbrev>Inherit platform development</titleabbrev>

    <subtitle>How to setup development environment, build and deploy</subtitle>

    <pubdate>
      2012-02-24
    </pubdate>

    <authorgroup>
      <author>
	<firstname>Bj√∂rn</firstname>
	<surname>Molin</surname>
	<affiliation>
	  <orgname>Inherit S AB</orgname>
	</affiliation>
      </author>
    </authorgroup>
    
  </articleinfo>

  <abstract>
    <title>Abstract</title>
    <para>
      How to setup the inherit-platform development environment, build and deploy
    </para>
  </abstract>

  <?custom-pagebreak?>

  <section id="pre-requirements">
    <title>Pre-requirements</title>

      <itemizedlist>
	<listitem>
	  <para>
	    Installed Java JDK 1.6 (this guide is written/tested with 1.6.0_26 x64 at Ubuntu 11.10 x64). Verify that the JAVA_HOME is set by adding it to .bashrc for instance. 
<programlisting>
export JAVA_HOME=/usr/lib/jvm/java-6-sun
</programlisting>
	  </para>
	</listitem>

	<listitem>
	  <para>
	    Maven 2.2.1 (mvn) 
	  </para>
	</listitem>

	<listitem>
	  <para>
	    Eclipse with m2eclipse maven plugin
	  </para>
	</listitem>

       </itemizedlist>



      
  </section>
  
  <section id="resolve_dependencies">
    <title>Resolve dependencies</title>
    <para>
    </para>
    
    <section id="resolve_dep_bonita_identity">
      <title>Bonita security-server</title>
      <para>
	There is no maven repository with Bonita security-server. Either install required jars in local maven repository or build bonita bonita-console, bonita-connectors and bonita-runtime (see Howto build Bonita)
      </para>
    </section>
  </section>

  <section id="checkout_code">
    <title>Get the source code</title>
    <para>
 <programlisting>
cd ~/inherit/workspace/
git clone gitosis@pluto.inherit.se:inherit-platform.git
 </programlisting>
    </para>
  </section>

  <section id="build_inherit_platform">
    <title>Build Inherit Platform</title>
    <para>
      <programlisting>
cd inherit-platform
mvn clean install
      </programlisting>
    </para>
  </section>

  <section id="import_eclipse">
    <title>Import project to eclipse</title>
    <para>
      <itemizedlist>
	<listitem>
	  <para>
	    Start Eclipse and choose menu "File->Import...".
	  </para>
	</listitem>
	<listitem>
	  <para>
	    Select "Maven->Existing Maven Projects" and click next.
	  </para>
	</listitem>
	<listitem>
	  <para>
	    Select root directory "inherit-platform" and finish import.
	  </para>
	</listitem>
      </itemizedlist>
    </para>
  </section>

  <section>
    <title>Deploy on server</title>
    <para>
    </para>

    <section id="server-pre-req">
      <title>Server pre-requirements</title>
      <para>
      </para>
      <section id="server-pre-req-bos">
	<title>Running BOS server</title>
	<para>
	  Running BOS server with Inherit's additional REST services
	  <programlisting>
scp -P 2212 adminherit@pluto.inherit.se:_
./inherit-platform-server-components/inherit-platform-BOS-5.6.1-Tomcat-6.0.33.tgz .

tar xzf inherit-platform-BOS-5.6.1-Tomcat-6.0.33.tgz
cd BOS-5.6.1-Tomcat-6.0.33/bin
./starup.sh
./tail -f ../logs/catalina.out
	  </programlisting>
	</para>
      </section>
      <section id="server-pre-req-hippo-jcr">
	<title>Hippo content repository</title>
	<para>
	  Download latest version of inherit-portal's content repository.
 <programlisting>
scp -P 2212 adminherit@pluto.inherit.se:_
./inherit-platform-server-components/jcr-inherit-portal.tgz .
tar xzf jcr-inherit-portal.tgz
</programlisting>
	</para>
      </section>
    </section>
    
    <section id="deploy_local_dev_server">
      <title>Deploy on local developer server</title>
      <para>
	<programlisting>
cd inherit-platform
mvn clean install
cp inherit-bonita-rest-server-custom/target/inherit-bonita-rest-server-custom-1.0-SNAPSHOT.war PATH_TO_BOS_SERVER/webapps
cd inherit-portal
mvn -P cargo.run -Drepo.path=/your/path/to/jcr-inherit-portal
	</programlisting>
      </para>
    </section>
    
    <section id="deploy_public_demo_server">
      <title>Deploy on public Demo server</title>
      <para>
	<programlisting>
cd inherit-platform
mvn clean install
cd inherit-portal
mvn -P dist
	</programlisting>
      </para>
      <para>
	<itemizedlist>
	  <listitem>
	    <para>
	      Copy inherit-platform/inherit-bonita-rest-server-custom/target/inherit-bonita-rest-server-custom-1.0-SNAPSHOT.war
	      to demo-vm's /opt/inherit-platform/BOS-5.6.1-Tomcat-6.0.33/webapps/
	    </para>
	  </listitem>
	  <listitem>
	    <para>
	      tar xzf inherit-platform/inherit-portal/target/inherit-portal-1.01.00-SNAPSHOT-distribution.tar.gz to demo vm's /opt/inherit-platform/apache-tomcat-6.0.35 
	    </para>
	  </listitem>
	</itemizedlist>
      </para>
    </section>
    
     <section id="apache2_front">
       <title>Install and configure Apache2 front</title>
       <para>
	 sudo apt-get install apache2
	 sudo apt-get install libapache2-mod-jk
       </para>
    </section>
  </section>
</article>

