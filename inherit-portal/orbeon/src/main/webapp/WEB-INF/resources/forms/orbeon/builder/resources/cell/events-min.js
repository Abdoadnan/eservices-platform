(function(){var Builder,Event,Events,YD,createCustomEvent;var __indexOf=Array.prototype.indexOf||function(item){for(var i=0,l=this.length;i<l;i++){if(this[i]===item){return i;}}return -1;};createCustomEvent=function(){return new YAHOO.util.CustomEvent(null,null,false,YAHOO.util.CustomEvent.FLAT);};ORBEON.Builder={mouseEntersGridTdEvent:createCustomEvent(),mouseExitsGridTdEvent:createCustomEvent(),triggerClickEvent:createCustomEvent(),controlAdded:$.Callbacks()};YD=YAHOO.util.Dom;Event=YAHOO.util.Event;Events=ORBEON.xforms.Events;Builder=ORBEON.Builder;$(function(){var cellEditorInputs,cellEditorTriggerGroups,cellEditorTriggers,cellEditorsContainer;cellEditorsContainer=null;cellEditorInputs=[];cellEditorTriggerGroups=[];cellEditorTriggers=[];(function(){var child,classToCategory,cssClass,gs,mapping,triggerSelector,_i,_j,_k,_len,_len2,_len3,_ref,_ref2;cellEditorsContainer=(YD.getElementsByClassName("fb-cell-editor",null,document))[0];classToCategory=[[["xforms-input"],cellEditorInputs],[["fb-grid-cell-icons","fb-grid-control-icons","fb-edit-items","fb-static-upload"],cellEditorTriggerGroups]];_ref=YD.getChildren(cellEditorsContainer);for(_i=0,_len=_ref.length;_i<_len;_i++){child=_ref[_i];for(_j=0,_len2=classToCategory.length;_j<_len2;_j++){mapping=classToCategory[_j];_ref2=mapping[0];for(_k=0,_len3=_ref2.length;_k<_len3;_k++){cssClass=_ref2[_k];if(YD.hasClass(child,cssClass)){mapping[1].push(child);}}}}gs=$(cellEditorTriggerGroups);triggerSelector=".xforms-trigger, .xforms-upload";return cellEditorTriggers=$.merge(gs.find(triggerSelector),gs.filter(triggerSelector));})();(function(){var buildGridTdEvent,currentMouseOverGridThTd;currentMouseOverGridThTd=null;buildGridTdEvent=function(gridTd){return{triggerGroups:cellEditorTriggerGroups,triggers:cellEditorTriggers,inputs:cellEditorInputs,gridTd:gridTd};};return Event.addListener(document,"mouseover",function(event){var gridThTd,target;target=Event.getTarget(event);gridThTd=!$(target).closest(".fr-grid").is(".fr-editable")?null:$(target).is(".fb-grid-th, .fb-grid-td")?target:$(target).closest(".fb-grid-th, .fb-grid-td")[0];if(gridThTd!=null){if(currentMouseOverGridThTd){if(gridThTd!==currentMouseOverGridThTd){Builder.mouseExitsGridTdEvent.fire(buildGridTdEvent(currentMouseOverGridThTd));currentMouseOverGridThTd=gridThTd;return Builder.mouseEntersGridTdEvent.fire(buildGridTdEvent(gridThTd));}}else{currentMouseOverGridThTd=gridThTd;return Builder.mouseEntersGridTdEvent.fire(buildGridTdEvent(gridThTd));}}else{if(currentMouseOverGridThTd){Builder.mouseExitsGridTdEvent.fire(buildGridTdEvent(currentMouseOverGridThTd));return currentMouseOverGridThTd=null;}}});})();return(function(){return Events.clickEvent.subscribe(function(_arg){var control;control=_arg.control;if(__indexOf.call(cellEditorTriggers,control)>=0){return Builder.triggerClickEvent.fire({trigger:control});}});})();});}).call(this);